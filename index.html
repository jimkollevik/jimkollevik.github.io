<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Works & Notes by Jim Kollevik</title>
	<link rel="stylesheet" type="text/css" href="default.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" rel="stylesheet">
</head>
<body>

<section class="wrapper">
	<header>
    <div id="tracks">Hämtar låtar...</div>
		<p class="light-grey">It's wednesday today. Tomorrow it's thursday.</p>
		<p class="dark-grey">(creative) works & notes of <span class="dark">Jim Kollevik.</span></p>
	</header>
	<section class="content">
		<p><a href="crm-the-fight-for-change.html"><span class="light-grey">CRM —</span> The fight for change</a></p>
		<!-- <p><a href=""><span class="light-grey">MA —</span> The story of journeys & sql</a></p> -->
		<p><a href=""><span class="light-grey">Life audit —</span> Top rated Notion template</a></p>
		<p><a href=""><span class="light-grey">Invoice —</span> My attempt on design in word</a></p>
	</section>
	<footer>
		<p class="dark-grey"><a class="dark-grey" href="@mailto:jim.kollevik@gmail.com">jim.kollevik@gmail.com</a> - <a class="dark-grey" href="">curriculum vitae</a></p>
		<p class="light-grey">Made for the love of minimalism</p>
	</footer>
</section><!-- end wrapper -->

<script>
    // URL till JSON-filen hostad på GitHub Pages
    const apiUrl = "https://jimkollevik.github.io/recent-tracks.json";

    async function fetchRecentTracks() {
      const tracksDiv = document.getElementById("tracks");
      try {
        const response = await fetch(apiUrl);
        if (!response.ok) {
          throw new Error(`HTTP-fel! Status: ${response.status}`);
        }
        const data = await response.json();

        // Töm innehåll och visa låtar
        tracksDiv.innerHTML = "";
        data.recenttracks.track.forEach(track => {
          const trackDiv = document.createElement("div");
          trackDiv.className = "track";
          trackDiv.innerHTML = `
            <strong>${track.name}</strong> av ${track.artist["#text"]}
            ${track.album["#text"] ? `- Album: ${track.album["#text"]}` : ""}
          `;
          tracksDiv.appendChild(trackDiv);
        });
      } catch (error) {
        console.error("Fel vid hämtning av låtar:", error);
        tracksDiv.innerHTML = "Kunde inte hämta låtar.";
      }
    }

    // Kör funktionen när sidan laddas
    fetchRecentTracks();
  </script>

</body>
</html>